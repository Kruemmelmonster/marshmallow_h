set(CMAKE_SYSTEM_NAME Linux)
set(CMAKE_SYSTEM_VERSION 1)

set(RPIFIRMWARE         $ENV{RPIFIRMWARE}         CACHE STRING "" FORCE)
set(RPITOOLCHAIN        $ENV{RPITOOLCHAIN}        CACHE STRING "" FORCE)
set(RPITOOLCHAIN_HOST   $ENV{RPITOOLCHAIN_HOST}   CACHE STRING "" FORCE)
set(RPITOOLCHAIN_TARGET $ENV{RPITOOLCHAIN_TARGET} CACHE STRING "" FORCE)
set(VC_PREFIX ${RPIFIRMWARE}/opt/vc)

set(CMAKE_SYSTEM_PROCESSOR ${RPITOOLCHAIN_TARGET})

set(CMAKE_C_COMPILER   ${RPITOOLCHAIN}/bin/${RPITOOLCHAIN_TARGET}-gcc)
set(CMAKE_CXX_COMPILER ${RPITOOLCHAIN}/bin/${RPITOOLCHAIN_TARGET}-g++)
set(CMAKE_C_FLAGS      "-meabi")
set(CMAKE_CXX_FLAGS    "-meabi")

set(CMAKE_FIND_ROOT_PATH ${RPITOOLCHAIN}/${RPITOOLCHAIN_TARGET}/sys-root ${VC_PREFIX})
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)

set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
set(CMAKE_INSTALL_RPATH "/opt/vc/lib")
set(CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)
set(CMAKE_SKIP_BUILD_RPATH FALSE)

link_directories(${RPITOOLCHAIN}/${RPITOOLCHAIN_TARGET}/sys-root/usr/lib)
link_directories(${VC_PREFIX}/lib)

option(MARSHMALLOW_VIEWPORT_OPENGL "Use OpenGL Viewport" ON)
option(MARSHMALLOW_OPENGL_VC "Use OpenGL VideoCore Viewport (broadcom)" ON)
option(MARSHMALLOW_OPENGL_GLES2 "Use EGL + OpenGL ES 2.0 (requires VC)" ON)

