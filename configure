#!/bin/sh

CMAKE=`which cmake`

if [ ${CMAKE} == "" ]; then
	echo "You need to have CMake installed (and in your PATH)."
	echo "Abort."
	exit -1
fi

CFLAGS="-O0 -g -fno-exceptions -Wextra -Wall -W -pedantic -Wshadow -Wcast-qual -Wwrite-strings -Wconversion -Wno-variadic-macros -Wno-long-long"
CXXFLAGS="${CFLAGS} -std=c++98"
#CXXFLAGS="${CXXFLAGS} -Weffc++ -Wold-style-cast" # \v^(.*eastl)@!.*warning
CFLAGS="${CFLAGS} -ansi"

cd build
cmake .. \
    -DCMAKE_BUILD_TYPE:STRING="Debug" \
    -DCMAKE_C_FLAGS_DEBUG:STRING="${CFLAGS}" \
    -DCMAKE_CXX_FLAGS_DEBUG:STRING="${CXXFLAGS}"
[ $? -eq 0 ] && echo && echo "Completed successfully! :)"
cd ..

