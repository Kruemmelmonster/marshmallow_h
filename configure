#!/bin/sh

CMAKE=`which cmake`

if [ ${CMAKE} == "" ]; then
	echo "You need to have CMake installed (and in your PATH)."
	echo "Abort."
	exit -1
fi

CFLAGS="-O0 -g -Wall -W -pedantic -Wshadow -Wcast-qual -Wwrite-strings -Wconversion -Wno-variadic-macros -Wno-long-long"
CXXFLAGS="${CFLAGS} -std=c++98"
CFLAGS="${CFLAGS} -ansi"

cd build
cmake .. \
    -DCMAKE_BUILD_TYPE:STRING="Debug" \
    -DCMAKE_C_FLAGS_DEBUG:STRING="${CFLAGS}" \
    -DCMAKE_CXX_FLAGS_DEBUG:STRING="${CXXFLAGS}"

make
cd ..

